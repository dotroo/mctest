{% extends 'base.twig' %}

{%  block title %}Employees{% endblock %}

{% block content %}
<h2>Employees</h2>
<a href="/employees/add">Add</a>
<table>
    <tr>
        <th>First Name</th>
        <th>Last Name</th>
        <th>Sex</th>
        <th>Birth Date</th>
        <th>Salary</th>
        <th>Department</th>
        <th>Projects</th>
        <th>Creation Date</th>
        <th>Update Date</th>
        <th>Actions</th>
    </tr>
    {% for empl in employees %}
        <tr>
            <td>{{ empl.firstName }}</td>
            <td>{{ empl.lastName }}</td>
            <td>{{ empl.sex }}</td>
            <td>{{ empl.birthday }}</td>
            <td>{{ empl.salary }}</td>
            <td>{{ empl.departmentModel.name }}</td>
            <td>{{ empl.projects|join(', ') }}</td>
            <td>{{ empl.createdAt|date() }}</td>
            <td>{{ empl.updatedAt|date() }}</td>
            <td>
                <div class="dep-control">
                    <ul>
                        <li>
                            <form method="post" action="/employees/edit">
                                <input type="hidden" name="id" value={{ empl.id }}>
                                <button type="submit" class="link-button">
                                    Edit
                                </button>
                            </form>
                        </li>
                        <li>
                            <form method="post" action="/employees/remove">
                                <input type="hidden" name="id" value={{ empl.id }}>
                                <button type="submit" class="link-button">
                                    Remove
                                </button>
                            </form>
                        </li>
                        <li>
                            <form method="post" action="/employees/assign">
                                <input type="hidden" name="id" value={{ empl.id }}>
                                <button type="submit" class="link-button">
                                    Assign project
                                </button>
                            </form>
                        </li>
                    </ul>
                </div>
            </td>
        </tr>
    {% endfor %}
</table>
{% endblock %}